var vis={};vis.chart={},vis.chart.api={},vis.data={},vis.chart.api.construct=function(){var t=function(t){var i=d3.select(document.createElement("div"));return i.attr("id",t.id),i.attr("class","vis-wrapper"),i.style({height:t.height,width:t.width,position:"relative"}),i.append("canvas"),i.append("svg").attr("class","vis-root").attr("height",parseInt(t.height,10)).attr("width",parseInt(t.width,10)).style({position:"absolute",left:0,top:0}).append("g").attr("vis-main"),i.node()};return{wrapper:t}}(),vis.promise=function(){var t=function(){this.successCallbacks=[],this.failCallbacks=[]};t.prototype={successCallbacks:null,failCallbacks:null,then:function(t,i){this.successCallbacks.push(t),i&&this.failCallbacks.push(i)}};var i=function(){this.promise=new t};return i.prototype={promise:null,resolve:function(t){this.promise.successCallbacks.forEach(function(i){window.setTimeout(function(){i(t)},0)})},reject:function(t){this.promise.failCallbacks.forEach(function(i){window.setTimeout(function(){i(t)},0)})}},{Deferred:i,Promise:t}}(),vis.data.Flattened=function(t){"use strict";var i=new vis.promise.Deferred,e=function(t,s){var n=_.compact(e.options.data.path.split("/")),a=_.get(s,n),o=_.forEach(e.options.measures,function(t){var i="object"==typeof t.value?_.compact(t.value.path.split("/")):t.value,e=_.pluck(a,i);return"function"==typeof t.value.formatter&&(e=_.transform(e,function(i,e){i.push(t.value.formatter(e))})),t.value=e,t}),r=_.forEach(e.options.dimensions,function(t){var i="object"==typeof t.value?_.compact(t.value.path.split("/")):t.value,e=_.pluck(a,i)||[];return"function"==typeof t.value.formatter&&(e=_.transform(e,function(i,e){i.push(t.value.formatter(e))})),t.value=_.uniq(e),t}),c={measures:o,dimensions:r};return t?i.reject(t):void i.resolve(c)};return e.options=t,t.data.value?e(null,t.data.value):"json"===t.data.type?d3.json(t.data.url,function(t,i){e(t,i)}):"csv"===t.data.type&&d3.csv(t.data.url,function(t,i){e(t,i)}),i.promise},vis.chart.Base=function(t,i){"use strict";this._id=t,this._options=i,this.setId=function(t){this.id=t},this.getId=function(){return this.id},this._setContent=function(t){this.content=t},this.getContent=function(){return this.content},this.injectAt=function(t){var i=this.getContent();return t.appendChild(i),this},this.init=function(){var t=this,e=null;this.setId(this._id),e=vis.chart.api.construct.wrapper({id:t.getId(),height:t._options.height,width:t._options.width}),this._setContent(e),i.dataset.then(function(t){console.log(t)},function(t){console.log(t)})}},vis.chart.Column=function(t){"use strict";vis.chart.Base.apply(this,[t])},vis.chart.Column.prototype=Object.create(vis.chart.Base.prototype),vis.chart.Line=function(t,i){"use strict";vis.chart.Base.apply(this,[t,i]),this.init()},vis.chart.Line.prototype=Object.create(vis.chart.Base.prototype);